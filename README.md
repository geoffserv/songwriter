# songwriter
This is an experimental script to build song verses by matching rhyme and meter from sections of source text.  It produces funny output, so I've moved on to build a  version that uses a DBMS.  Further work happening in the [rhymadex project](https://github.com/geoffserv/rhymadex).

`songwriter` loads a source text file and split it on any of the punctuation `,`, `.`, or `!`
Then it forms a dict with the key being the last word of each split line fragment.
Under each key is stored a list of all line fragments ending in that key, alongside their syllable count estimate, and a list of words that rhyme with that key.
Then a hard-coded verse is generated by doing a dumb, very random brute force across the data structure until it finds a sequence of lines that match the spec.

* lastWord rhymeGroup "A", fullLine 9 syllables
* lastWord rhymeGroup "B", fullLine 6 syllables
* lastWord rhymeGroup "A", fullLine 9 syllables
* lastWord rhymeGroup "B", fullLine 6 syllables

## Running songwriter

Building the song line data structure is slow, big.txt takes about 50 seconds to process.

Of course, the random search and build of song lyrics seems relatively fast on a local workstation, although it's a horrible overall approach.  But it works.  And,
the output is amusing:

```
$ python3 songwriter.py 
INFO- SETTINGS- Song Meter- A line: 9  +- 1 syllables
INFO- SETTINGS- Song Meter- B line: 6  +- 1 syllables
INFO- Opening file for processing: big.txt
INFO- Deduplicating sentence list ...
INFO- Building lyric dictionary ...
INFO- Completed building lyric dictionary in 50.545454025268555 seconds
INFO- Total Lines Processed: 119287
INFO- Total Words Processed: 1075552
INFO- Total Syllables seen: 315113247
INFO- Total Discarded lines: 107049
INFO- Total Un-Rhymable words: 4096
INFO- Total Out-Of-Meter lines: 81547
INFO- Total Unique lyric lines available: 33600
INFO- Lyric Dictionary is ready!
INFO- Beginning generation of 25 verses ...
['Under the direction of Nelson P',
 'the seizure of transports',
 'These changes vary in degree',
 'built in British ports']
['his huge arms and legs outstretched',
 'As a professor',
 'the ligaments are stretched',
 "Harrison's successor"]
['#Syphilitic Disease of Glands',
 'The Republicans chose',
 'for she did not let it out of her hands',
 '"Heaven only knows']
['If you are going to fight a duel',
 'but has never been denied',
 'Your misfortunes are cruel',
 '" her eyes replied']
['the ligaments become slack',
 'Spinning and weaving',
 'and to form a thick-walled sac',
 'his whole chest heaving']
['His satellites--the senior clerk',
 'It is maintained',
 'He had set the engine at work',
 '_--As has been explained']
['was now childishly amusing',
 "'For the love of Heaven",
 'The bleeding occurs as an oozing',
 'about eleven']
["=An English Historian's View of the Period",
 'Marie Antoinette',
 'and movements of each period',
 'lighting a cigarette']
[...]
```

## Next steps
To deploy this as a webapp and allow other people to play with it, it will need to be database driven somehow, more extensible and so on.  Further work happening in the [rhymadex project](https://github.com/geoffserv/rhymadex).
